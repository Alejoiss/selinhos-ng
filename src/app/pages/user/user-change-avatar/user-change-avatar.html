@if (loading) {
    <div class="flex justify-center items-center h-48">
        <nz-spin nzSize="large"></nz-spin>
    </div>
} @else {
    <div class="w-full max-w-2xl mx-auto p-4 space-y-6">
        <div class="bg-white p-4 rounded-xl text-center">
            <p class="text-sm text-color-secondary mb-4">Clique na imagem para trocar a foto de perfil</p>

            <div class="flex justify-center mb-4">
                <div class="w-1/2 max-w-[200px]">
                    <input #fileInput type="file" accept="image/*" class="hidden" (change)="onFileSelected($event)" />
                    <div class="cursor-pointer" (click)="triggerFile(fileInput)">
                        @if (previewUrl) {
                            <img [src]="previewUrl" alt="Avatar preview" class="w-full h-full object-cover rounded-full border-2 border-white mx-auto" />
                        }
                        @else {
                            <div class="w-full h-48 bg-gray-200 rounded-full flex items-center justify-center">
                                <i class="ph ph-user text-4xl text-gray-500"></i>
                            </div>
                        }
                    </div>
                </div>
            </div>

            <div>
                <button (click)="save()" [disabled]="!selectedFile || uploading"
                    class="w-full bg-brand-variant text-color-primary font-medium !rounded-xl !py-2 !h-auto !border border-border-01 flex items-center justify-center gap-2 cursor-pointer">
                    @if (uploading) {
                        <i class="ph ph-spinner animate-spin text-base align-middle"></i>
                    } @else {
                        Salvar
                    }
                </button>
            </div>
        </div>
    </div>
}
